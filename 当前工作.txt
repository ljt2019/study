	<select id='getGymId' parameterType="java.lang.String" resultType="java.lang.String">
		select temp.gym_id from (
			(SELECT 
				gym_id
				,1 AS use_status
			FROM dev_device 
			WHERE trainer_mall_id =#{mallId}
			AND product_info_id =0 
			AND use_status=2 
			AND delete_flag=0 
			GROUP BY gym_id  LIMIT 1 )
			UNION ALL 
			(SELECT 
				gym_id
				,0 AS use_status
			FROM dev_device 
			WHERE trainer_mall_id =#{mallId}
			AND product_info_id =0 
			AND delete_flag=0 
			GROUP BY gym_id  LIMIT 1)
		) temp 
			ORDER BY  use_status desc  limit 1
	</select>
